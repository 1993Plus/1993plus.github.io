<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>使用 parted 创建磁盘分区 | Weidong</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="parted," />
  

  <meta name="description" content="linux 分区工具 parted man  page中 parted的介绍 ##  parted 一个分区操作工具 parted - a partition manipulation program ## parted 是一个用来操作磁盘分区的程序，它支持多种分区表格式，包括 msdos 和 GPT 。 使用格式 parted [options] [device [command [option">
<meta name="keywords" content="parted">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 parted 创建磁盘分区">
<meta property="og:url" content="http://www.weidong.io/2017/09/15/parted/index.html">
<meta property="og:site_name" content="Weidong">
<meta property="og:description" content="linux 分区工具 parted man  page中 parted的介绍 ##  parted 一个分区操作工具 parted - a partition manipulation program ## parted 是一个用来操作磁盘分区的程序，它支持多种分区表格式，包括 msdos 和 GPT 。 使用格式 parted [options] [device [command [option">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-09-15T09:51:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用 parted 创建磁盘分区">
<meta name="twitter:description" content="linux 分区工具 parted man  page中 parted的介绍 ##  parted 一个分区操作工具 parted - a partition manipulation program ## parted 是一个用来操作磁盘分区的程序，它支持多种分区表格式，包括 msdos 和 GPT 。 使用格式 parted [options] [device [command [option">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>




<div class="content content-post CENTER">
   <article id="post-parted" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">使用 parted 创建磁盘分区</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.09.15</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Weidong</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://www.weidong.io/2017/09/15/parted/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>linux 分区工具 parted</p>
<p><code>man  page</code>中 <code>parted</code>的介绍</p>
<p>##  <code>parted</code> 一个分区操作工具</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">parted - a partition manipulation program</div></pre></td></tr></table></figure>
<p>## parted 是一个用来操作磁盘分区的程序，它支持多种分区表格式，包括 msdos 和 GPT 。</p>
<p><strong>使用格式</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">parted [options] [device [<span class="built_in">command</span> [options...]...]]</div></pre></td></tr></table></figure>
<p>## 如果后面没有跟参数将以交互模式运行.</p>
<p><strong>命令选项</strong></p>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">&gt;   -h, --<span class="built_in">help</span></div><div class="line">&gt;          displays a <span class="built_in">help</span> message</div><div class="line">&gt;          <span class="comment">## 显示帮助信息.</span></div><div class="line">&gt;   -l, --list</div><div class="line">&gt;          lists partition layout on all block devices</div><div class="line">&gt;          <span class="comment">## 列出所有块设备的分区表.</span></div><div class="line">&gt;   -s, --script</div><div class="line">&gt;          never prompts <span class="keyword">for</span> user intervention</div><div class="line">&gt;          <span class="comment">## 不显示用户提示.</span></div><div class="line">&gt;   -v, --version</div><div class="line">&gt;          displays the version</div><div class="line">&gt;          <span class="comment">## 显示版本.</span></div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p><strong>操作命令</strong></p>
<blockquote>
<p>help [command]</p>
<p>## 打印普通帮助信息,或者指定命令的帮助信息.</p>
<p>mklabel</p>
<p>## 创建分区表.</p>
<p>mkpart</p>
<p>## 创建一个分区.</p>
<p>print</p>
<p>## 显示分区表与分区信息.</p>
<p>rm</p>
<p>## 删除分区.</p>
<p>select </p>
<p>## 选择设备.</p>
<p>unit</p>
<p>## 设置单位.</p>
<p>align-check</p>
<p>## 检测分区是否最优或者最小对齐.</p>
<p>quit</p>
<p>## 退出.</p>
</blockquote>
<p><strong>操作示例</strong></p>
<p>直接输入 <code>parted</code> 进入交互式模式</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># parted</span></div><div class="line">GNU Parted 3.1			<span class="comment">## 版本号.</span></div><div class="line">Using /dev/sda			<span class="comment">## 当前操作的磁盘名称(默认选择第一块磁盘)</span></div><div class="line">Welcome to GNU Parted! Type <span class="string">'help'</span> to view a list of commands.</div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p> 如果需要操作的磁盘不是这块磁盘,那输入 <code>seclet</code> 来选择其它设备.</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) select /dev/sdb                                                  </div><div class="line">Using /dev/sdb			<span class="comment">## 以成功切换到了 sdb 磁盘上.</span></div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>使用 <code>print</code> 来查看一下当前磁盘分区表信息.</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) <span class="built_in">print</span>                                                            </div><div class="line">Error: /dev/sdb: unrecognised disk label</div><div class="line">Model: VMware, VMware Virtual S (scsi)                                    </div><div class="line">Disk /dev/sdb: 107GB</div><div class="line">Sector size (logical/physical): 512B/512B</div><div class="line">Partition Table: unknown</div><div class="line">Disk Flags: </div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>## 由于这块磁盘是第一次使用没有创建分区表,所以会提示“为发现分区表”</p>
<p>## 那现在来为这块磁盘创建分区表</p>
<p>使用 <code>mklabel</code>命令创建 <code>GPT</code> 分区表</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) mklabel gpt</div></pre></td></tr></table></figure>
<p>再打印一下磁盘信息看看</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) <span class="built_in">print</span>                                                            </div><div class="line">Model: VMware, VMware Virtual S (scsi)</div><div class="line">Disk /dev/sdb: 107GB</div><div class="line">Sector size (logical/physical): 512B/512B</div><div class="line">Partition Table: gpt</div><div class="line">Disk Flags: </div><div class="line"></div><div class="line">Number  Start  End  Size  File system  Name  Flags</div><div class="line"></div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>## 可以看到<code>Partition Table</code> 显示为 <code>gpt</code> 说明已经创建成功了</p>
<p>好了,现在可以对磁盘创建分区了,来创建一个 10GB 的分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) mkpart</div><div class="line">Partition name?  []? part1 </div><div class="line">File system <span class="built_in">type</span>?  [ext2]? 		<span class="comment">## 这里直接默认即可,后期再重新格式化.</span></div><div class="line">Start? 1</div><div class="line">End? 10240MB</div></pre></td></tr></table></figure>
<p>打印一下分区信息看看</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) <span class="built_in">print</span>                                                            </div><div class="line">Model: VMware, VMware Virtual S (scsi)</div><div class="line">Disk /dev/sdb: 107GB</div><div class="line">Sector size (logical/physical): 512B/512B</div><div class="line">Partition Table: gpt</div><div class="line">Disk Flags: </div><div class="line"></div><div class="line">Number  Start   End     Size    File system  Name   Flags</div><div class="line"> 1      1049kB  10.2GB  10.2GB  xfs          part1</div><div class="line"></div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>如果现在不想要这个分区了,使用 <code>rm</code> 命令删除</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) rm 1		<span class="comment">## 输入 rm 后面跟上分区编号即可.</span></div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>将磁盘分区表更改为 <code>msdos</code> 分区表</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) mklabel msdos                                                    </div><div class="line">Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do</div><div class="line">you want to <span class="built_in">continue</span>?</div><div class="line">Yes/No? y</div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>## 由于之前磁盘已经存在 <code>gpt</code> 分区表了,所以系统会发出警告.如果确认要这么做的话输入 <code>y</code> 后按回车键即可.</p>
<p>再看一下分区表信息</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) <span class="built_in">print</span>                                                            </div><div class="line">Model: VMware, VMware Virtual S (scsi)</div><div class="line">Disk /dev/sdb: 107GB</div><div class="line">Sector size (logical/physical): 512B/512B</div><div class="line">Partition Table: msdos</div><div class="line">Disk Flags: </div><div class="line"></div><div class="line">Number  Start  End  Size  Type  File system  Flags</div><div class="line"></div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>## 可以看到 <code>Partition Table</code> 已经显示为 <code>msdos</code> 了.</p>
<p>现在了划分一块 10GB 的主分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) mkpart                                                           </div><div class="line">Partition <span class="built_in">type</span>?  primary/extended? primary	<span class="comment">## 在这里选择 primary 表示主分区.</span></div><div class="line">File system <span class="built_in">type</span>?  [ext2]?                                                </div><div class="line">Start? 1                                                                  </div><div class="line">End? 10240MB</div></pre></td></tr></table></figure>
<p>使用 <code>unit</code> 命令设置按百分百划分分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) unit %</div></pre></td></tr></table></figure>
<p>删除分区使用百分百来划分分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) rm 1 </div><div class="line">(parted) <span class="built_in">print</span> free		<span class="comment">## print free 查看未划分分区的空间.</span></div><div class="line">Model: VMware, VMware Virtual S (scsi)</div><div class="line">Disk /dev/sdb: 100%</div><div class="line">Sector size (logical/physical): 512B/512B</div><div class="line">Partition Table: msdos</div><div class="line">Disk Flags: </div><div class="line"></div><div class="line">Number  Start  End   Size  Type  File system  Flags</div><div class="line">        0.00%  100%  100%        Free Space</div></pre></td></tr></table></figure>
<p>把剩余的空间全部划分为 <code>extended</code> 分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) mkpart </div><div class="line">Partition <span class="built_in">type</span>?  primary/extended? extended                               </div><div class="line">Start? 0                                                                  </div><div class="line">End? 100%</div></pre></td></tr></table></figure>
<p>继续划分逻辑分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">(parted) mkpart                                                           </div><div class="line">Partition <span class="built_in">type</span>?  primary/logical? logical                                 </div><div class="line">File system <span class="built_in">type</span>?  [ext2]?                                                </div><div class="line">Start? 0                                                                  </div><div class="line">End? 20%  </div><div class="line">(parted) mkpart </div><div class="line">Partition <span class="built_in">type</span>?  primary/logical? logical                                 </div><div class="line">File system <span class="built_in">type</span>?  [ext2]?                                                </div><div class="line">Start? 20%                                                                </div><div class="line">End? 40%                                                                  </div><div class="line">(parted)</div></pre></td></tr></table></figure>
<p>## 当前这个磁盘的大小是 100GB 划分 20% 也就是 20GB,继续划分第一块分区,那就是从 20% 开始划分到整块磁盘的 40%.至此,这个磁盘被划分了两个 20GB 的逻辑空间.</p>
<p>使用 <code>quit</code> 退出操作.</p>
<p>使用 <code>lsblk</code> 查看块设备情况.</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># lsblk</span></div><div class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</div><div class="line">sda      8:0    0  100G  0 disk </div><div class="line">├─sda1   8:1    0    1G  0 part /boot</div><div class="line">├─sda2   8:2    0    4G  0 part [SWAP]</div><div class="line">└─sda3   8:3    0   50G  0 part /</div><div class="line">sdb      8:16   0  100G  0 disk </div><div class="line">├─sdb1   8:17   0  512B  0 part </div><div class="line">├─sdb5   8:21   0   20G  0 part </div><div class="line">└─sdb6   8:22   0   20G  0 part </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>## 可以看到分区以被成功创建.</p>
<p>END!</p>

    
  </div>
</article>


   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2017/09/15/systemd-basic-opt/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2017/09/17/pxe-install-centos/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = 'http://www.weidong.io/2017/09/15/parted/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//forsigner.disqus.com/count.js" async></script>



    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
